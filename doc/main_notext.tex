\documentclass{article}


%%%%%%%%%%%%%%%%%%%%%%%%%
%%%% PREAMBLES BEGIN %%%%
%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage[lmargin=1.5in, lmargin=1.5in, tmargin=0.5in, bmargin=0.5in]{geometry} % page size

\usepackage[utf8]{inputenc}
\usepackage{amsmath} % for align
\usepackage{hyperref} % for url




%%%% Title Formats BEGIN %%%%
%\renewcommand\thesubsection{\thesection.\alph{subsection}}
%%%% Title Formats END %%%%




%%%% Comments BEGIN %%%%
\usepackage[dvipsnames]{xcolor}

\newif\ifdraft % set to false to remove comments and todos
\drafttrue
%\draftfalse

\newcommand{\yuheng}[1]{\ifdraft{{\footnotesize\color{purple}[Yuheng: #1]}}\fi}
%%%% Comments END %%%%

%%%%%%%%%%%%%%%%%%%%%%%
%%%% PREAMBLES END %%%%
%%%%%%%%%%%%%%%%%%%%%%%








\title{Formal Method on Hardware Security}
\author{}
\date{September 2022}

\begin{document}

\maketitle








%%%%%%%%%%%%%%%%%%%%%%%%
%%%% SECTIONS BEGIN %%%%
%%%%%%%%%%%%%%%%%%%%%%%%


\section{Compare the Property in Rosette and in Coq}


\subsection{Property in Rosette.}

\paragraph{Property to verify.}
Last week, we have a state machine and want to verify a property hold for each state of the machine.
Formally,
\begin{align*}
\forall &~~ \text{input} ~~ in_0, in_1, \dots, in_n, \\
\text{Let} &~~ S_0 \xrightarrow[]{in_0} S_{1} \xrightarrow[]{in_1} \cdots \xrightarrow[]{in_n} S_{n+1} \\
\text{If} &~~ \text{No smash in the $in_0, in_1, \dots, in_n$} \\
\text{We have} &~~ PropertyHold(S_0), PropertyHold(S_1), \dots, PropertyHold(S_n)
\end{align*}




\paragraph{Property for induction step.}
The property I verify for the induction step is:
\begin{align*}
\forall &~~ \text{state $S_i$, input $in_i$, $in_{i+1}$}, \\
\text{Let} &~~ S_i \xrightarrow[]{in_i} S_{i+1} \xrightarrow[]{in_{i+1}} S_{i+2} \\
\text{If} &~~ \text{No smash in the $in_i, in_{i+1}$} \\
\text{We have} &~~ PropertyHold(S_{i+1}) \Rightarrow PropertyHold(S_{i+2})
\end{align*}

It is a little weird since why not just use:
\begin{align*}
\forall &~~ \text{state $S_i$, input $in_i$}, \\
\text{Let} &~~ S_i \xrightarrow[]{in_i} S_{i+1} \\
\text{If} &~~ \text{No smash in the $in_i$} \\
\text{We have} &~~ PropertyHold(S_{i}) \Rightarrow PropertyHold(S_{i+1})
\end{align*}






\subsection{Property in Coq.}

\paragraph{Property to verify.}
Let's translate the property in following way:
\begin{align*}
\forall &~~ \text{input} ~~ in_0, in_1, \dots, in_n, \\
\text{We have} &~~ PropertyHold'(in_0, in_1, \dots, in_n)
\end{align*}




\paragraph{Property for induction step.}
\begin{align*}
\forall &~~ \text{input} ~~ in_0, in_1, \dots, in_i, in_{i+1}, \\
\text{We have} &~~ PropertyHold'(in_0, in_1, \dots, in_i) \Rightarrow PropertyHold'(in_0, in_1, \dots, in_i, in_{i+1})
\end{align*}




\paragraph{Relate the coq property with Rosette property.}
We can try to expand this property a little bit.
\begin{align*}
\forall &~~ \text{input} ~~ in_0, in_1, \dots, in_i, in_{i+1}, \\
\text{Let} &~~ S_0 \xrightarrow[]{in_0} S_{1} \xrightarrow[]{in_1} \cdots \xrightarrow[]{in_n} S_{n} \xrightarrow[]{in_{n+1}} S_{n+2} \xrightarrow[]{in_{n+1}} S_{n+2} \\
\text{We have} &~~ PropertyHold(S_{n+1}) \Rightarrow PropertyHold(S_{n+2})
\end{align*}

To further become identical to the Rosette property we are verifying, we actually conservatively think the $S_{n}$ here can be an arbitrary state.








%%%%%%%%%%%%%%%%%%%%%%
%%%% SECTIONS END %%%%
%%%%%%%%%%%%%%%%%%%%%%

\end{document}
